/* App.css — full merged stylesheet
   - pure-flex layout so map and sidebar match heights
   - only sidebar scrolls internally
   - feed list fills the card
   - create accordion and topic spotlight view
   - feed descriptions truncated to a single-line preview
   - full-width Engage button in spotlight
   - topic list: no bullets and left padding matches right side
*/

/* Basic resets */
html, body, #root {
    height: 100%;
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

/* Small CRA pieces kept for compatibility */
.App {
    text-align: center;
}

.App-logo {
    height: 40vmin;
    pointer-events: none;
}

@media (prefers-reduced-motion: no-preference) {
    .App-logo {
        animation: App-logo-spin infinite 20s linear;
    }
}

@keyframes App-logo-spin {
    from {
        transform: rotate(0deg);
    }

    to {
        transform: rotate(360deg);
    }
}

/* Basic form controls */
form {
    display: flex;
    gap: 0.5rem;
    margin-top: 0.5rem;
}

input {
    padding: 0.3rem;
    border: 1px solid #ccc;
    border-radius: 4px;
    box-sizing: border-box;
}

button {
    padding: 0.4rem 0.8rem;
    background: #0078d7;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

    button:hover {
        background: #005a9e;
    }

/* Root layout: lock to viewport and prevent document-level scrolling */
.app-root {
    min-height: 100vh;
    height: 100vh;
    display: flex;
    flex-direction: column;
    overflow: hidden; /* critical: stop page-level scrolling */
}

/* Header (participates in flex layout) */
.app-header,
.app-header.header--with-user {
    padding: 0.5rem 1rem;
    background: #0b63a4;
    color: white;
    display: flex;
    align-items: center;
    justify-content: space-between;
    box-sizing: border-box;
    flex: 0 0 auto; /* header doesn't grow; measured height affects remaining space */
}

    /* Site title */
    .app-header h1,
    .header-left .site-title {
        margin: 0;
        font-size: 1.05rem;
        font-weight: 600;
    }

/* Main area: occupies remaining viewport space below header */
.app-main {
    display: flex;
    gap: 1rem;
    padding: 1rem;
    box-sizing: border-box;
    flex: 1 1 auto; /* grow to fill available vertical space */
    align-items: stretch; /* children match height of this container */
    overflow: auto; /* prevent main area from scrolling */
}

/* Map column: flexible, fills vertical space given by app-main */
.map-column {
    flex: 1 1 70%;
    min-width: 300px;
    display: flex;
    flex-direction: column;
    border-radius: 6px;
    overflow: hidden;
    box-shadow: 0 2px 6px rgba(0,0,0,0.08);
}

/* Make the Leaflet map fill its container */
.main-map {
    width: 100%;
    flex: 1 1 auto;
    min-height: 420px;
    height: 100%;
}

/* Right column (sidebar): fixed width, stretches to match the map height by flex */
.right-column {
    flex: 0 0 360px; /* adjust width as desired */
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    align-items: stretch;
    box-sizing: border-box;
    overflow: hidden; /* internal regions will manage their own scrolling */
}

/* Card base */
.card {
    background: #fff;
    border-radius: 8px;
    padding: 0.75rem;
    box-shadow: 0 1px 3px rgba(0,0,0,0.06);
    box-sizing: border-box;
}

/* Special small card backgrounds */
.auth-box, .profile-box {
    background: linear-gradient(180deg,#f7fbff,#eef7ff);
    padding: 0.6rem;
    border-radius: 6px;
    box-sizing: border-box;
}

/* Compact form controls used in many cards */
.compact-form {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

    .compact-form input[type="email"],
    .compact-form input[type="password"],
    .compact-form input[type="text"],
    .compact-form textarea,
    .compact-form select {
        padding: 0.45rem;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 0.95rem;
        box-sizing: border-box;
    }

    .compact-form select {
        background: #fff;
    }

    .compact-form button {
        padding: 0.45rem 0.6rem;
        border: none;
        background: #0b63a4;
        color: white;
        border-radius: 4px;
        cursor: pointer;
    }

        .compact-form button.secondary {
            background: #666;
        }

/* Radio group layout */
.radios {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
    font-size: 0.9rem;
}

/* --------------------------
   Feed / Available Topics
   --------------------------
   heading removed; feed-list now fills the card completely
   list-style removed and left-padding aligned with card padding
*/
.feed-section {
    display: flex;
    flex-direction: column;
    flex: 1 1 auto; /* grow to fill the right-column height */
    min-height: 0; /* allow internal children to scroll */
    box-sizing: border-box;
}

/* feed-list: let the card's padding define outer spacing; internal ul has no extra padding */
.feed-list {
    margin-top: 0;
    overflow-y: auto;
    padding: 0; /* remove any extra horizontal padding so list sits flush with card left */
    flex: 1 1 auto;
    min-height: 0;
}

    /* remove bullets and default ul padding; keep a small right gutter so text doesn't touch card edge */
    .feed-list ul {
        list-style: none;
        margin: 0;
        padding: 0 0.25rem 0 0; /* small right padding to match existing right-side spacing */
    }

/* Feed item styling: horizontal padding removed (card provides outer padding) */
.feed-item {
    padding: 0.5rem 0; /* vertical spacing only */
    border-bottom: 1px solid #f0f0f0;
}

.feed-title {
    font-weight: 600;
}

/* Single-line preview for topic descriptions in the feed */
.feed-desc {
    display: -webkit-box; /* needed for line-clamp */
    -webkit-line-clamp: 1; /* show only the first line */
    -webkit-box-orient: vertical;
    overflow: hidden; /* hide overflow text */
    text-overflow: ellipsis; /* show "..." when truncated */
    white-space: normal; /* allow wrapping for webkit-box to work */
    line-height: 1.25; /* keep a compact single-line height */
    max-height: 1.25em; /* enforce single-line visual height */
    color: #444; /* keep your existing color */
    margin-top: 0.25rem;
}

.feed-meta {
    margin-top: 0.35rem;
    color: #666;
    font-size: 0.85rem;
}

/* Clickable feed items */
.feed-item--clickable {
    cursor: pointer;
    transition: background 120ms ease;
}

    .feed-item--clickable:hover {
        background: rgba(11,99,164,0.04);
    }

/* Monospace small text utility */
.mono {
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", monospace;
    font-size: 0.9rem;
}

/* --------------------------
   Spotlight view (selected topic)
   -------------------------- */
.spotlight-section {
    position: relative; /* so close button can be absolute */
    padding: 1rem;
    display: flex;
    flex-direction: column;
    gap: 0.6rem;
    box-sizing: border-box;
}

/* Close 'X' top-right */
.spotlight-close {
    position: absolute;
    top: 1rem;
    right: 2.5rem; /* Increase this from 1rem to give room for scrollbar */
    background: #f0f0f0;
    border: none;
    border-radius: 50%;
    width: 32px;
    height: 32px;
    font-size: 1.2rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    z-index: 10;
}

    .spotlight-close:hover {
        background: rgba(0,0,0,0.1);
    }

/* Spotlight content */
.spotlight-title {
    margin: 0;
    font-size: 1.05rem;
}

.spotlight-desc {
    margin: 0.25rem 0;
    color: #333;
    line-height: 1.35;
}

.spotlight-meta {
    color: #666;
    font-size: 0.88rem;
}

/* Make the spotlight card allow internal scrolling when content is large */
.spotlight-section {
    display: flex;
    flex-direction: column;
    /* allow the card to shrink and let its inner content scroll */
    min-height: 0;
    height: 100%;
    box-sizing: border-box;
    overflow: hidden; /* keep outer card from scrolling the whole page */
}

/* The scrollable area inside the spotlight card */
.spotlight-content {
    flex: 1 1 auto; /* take available vertical space */
    min-height: 0; /* allow flex children to shrink correctly */
    overflow-y: auto; /* enable vertical scrolling when needed */
    padding-right: 0.5rem; /* small right gutter for scrollbar */
}

/* Keep the engage block visible and positioned after the scrollable content */
.spotlight-engage {
    flex: 0 0 auto; /* doesn't grow; sits below the scrollable content */
    margin-top: 0.75rem; /* preserve spacing */
}

/* Optional: ensure the close button stays visually anchored in the card corner */
.spotlight-close {
    z-index: 2; /* keep above scrollable content */
}

/* Small tweak: ensure long description wraps nicely and has spacing */
.spotlight-desc {
    white-space: normal;
    word-break: break-word;
    margin-bottom: 0.5rem;
}

/* More vertical space between spotlight meta (author/time) and the engage section */
.spotlight-meta {
    margin-bottom: 3.75rem; /* increase as needed (e.g. 1rem → 1.5rem) */
}

.spotlight-engage {
    margin-top: 0; /* reset if previously set; spacing now comes from spotlight-meta */
}

/* Spotlight actions */
.spotlight-actions button {
    padding: 0.45rem 0.6rem;
    border-radius: 4px;
    border: none;
    background: #0b63a4;
    color: white;
    cursor: pointer;
}

    .spotlight-actions button.secondary {
        background: #666;
    }

/* ENGAGE: full-width centered radio group and button spacing */
.spotlight-engage {
    margin-top: 0.75rem;
}

    .spotlight-engage .radios {
        gap: 0.5rem;
        align-items: center;
    }

/* Centered, full-width engage button container */
.engage-actions {
    display: flex;
    justify-content: stretch;
    margin-top: 0.5rem;
}

    /* Full-width engage button styling */
    .engage-actions button {
        width: 100%;
        min-width: 0;
        padding: 0.6rem 0.9rem;
        box-sizing: border-box;
        border-radius: 6px;
        background: #0b63a4;
        color: #fff;
        border: none;
        cursor: pointer;
        font-weight: 600;
    }

        .engage-actions button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

/* Create Topic: align and stretch Create Topic button like Engage */
.create-topic-form {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.create-actions {
    display: flex;
    justify-content: stretch; /* make the single button fill available width */
    margin-top: 0.5rem;
}

    .create-actions .create-button {
        width: 100%;
        min-width: 0;
        padding: 0.6rem 0.9rem;
        box-sizing: border-box;
        border-radius: 6px;
        background: #0b63a4;
        color: #fff;
        border: none;
        cursor: pointer;
        font-weight: 600;
    }

        .create-actions .create-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

/* Center the Create a New Topic heading horizontally in the accordion header */
.accordion-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0;
    box-sizing: border-box;
}

    .accordion-header h3 {
        font-size: 1rem; /* Match Create a New Topic */
        margin: 0;
        font-weight: 600; /* Match Create a New Topic */
        flex: 1 1 auto;
        text-align: center;
    }

.create-section .accordion-header {
    display: flex;
    align-items: center;
    gap: 0rem;
}

    /* Make the title take remaining space and center its text */
    .create-section .accordion-header h3 {
        margin: 0;
        flex: 1 1 auto; /* take available horizontal space */
        text-align: center; /* center the heading text */
        font-size: 1.25rem;
        font-weight: 600;
    }

    /* Keep the toggle button aligned to the right */
    .create-section .accordion-header .accordion-toggle {
        flex: 0 0 auto;
    }

/* --------------------------
   Create accordion styles
   -------------------------- */
.create-section.card,
.create-section.card > .accordion-header,
.create-section.card > .accordion-body {
    box-sizing: border-box;
}

.create-section .accordion-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0rem;
    margin-bottom: 0rem;
}

.accordion-toggle {
    width: 34px;
    height: 34px;
    border-radius: 50%;
    border: none;
    background: #0b63a4;
    color: white;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: 0 2px 6px rgba(11,99,164,0.18);
    transition: transform 200ms ease, background 160ms ease;
    padding: 0;
    font-size: 18px;
    line-height: 1;
}

    .accordion-toggle:hover {
        transform: translateY(-2px);
    }

    .accordion-toggle.open {
        background: #084f7a;
    }

    .accordion-toggle .plus {
        display: inline-block;
        transform-origin: center;
        transition: transform 200ms ease;
    }

    .accordion-toggle.open .plus {
        transform: rotate(45deg);
    }

.accordion-body {
    overflow: hidden;
    max-height: 0;
    opacity: 0;
    transition: max-height 260ms ease, opacity 220ms ease;
    pointer-events: none;
}

    .accordion-body.expanded {
        max-height: 500px;
        opacity: 1;
        pointer-events: auto;
    }

.create-section .compact-form {
    margin-top: 0.25rem;
}

/* --------------------------
   Header right-justified user info + buttons
   -------------------------- */
.header-right {
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.header-user-line {
    display: flex;
    align-items: center;
    gap: 0.6rem;
    color: white;
    font-size: 0.92rem;
}

.header-email.mono {
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", monospace;
    font-size: 0.9rem;
    opacity: 0.95;
}

.header-home {
    font-size: 0.86rem;
    opacity: 0.9;
}

.header-action,
.header-logout {
    background: rgba(255,255,255,0.12);
    border: 1px solid rgba(255,255,255,0.18);
    color: white;
    padding: 6px 10px;
    border-radius: 6px;
    font-size: 0.86rem;
    cursor: pointer;
}

    .header-action:hover,
    .header-logout:hover {
        background: rgba(255,255,255,0.18);
    }

/* Logout icon button sizing */
.header-logout {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.35rem;
    padding: 6px 8px;
    width: 40px; /* keeps button compact for icon */
    height: 36px;
    border-radius: 6px;
    border: none;
    background: rgba(255,255,255,0.12);
    color: white;
    cursor: pointer;
}

    .header-logout svg {
        width: 18px;
        height: 18px;
    }

.spotlight-count {
    margin: 0.25rem 0 0.75rem;
    font-size: 0.95rem;
    color: #0078d7;
}

.header-home.clickable {
    background: none;
    border: none;
    padding: 0;
    font: inherit;
    cursor: pointer;
}

.color-palette {
    display: flex;
    flex-wrap: wrap;
    margin: 0.5rem 0;
}

.palette-item {
    display: flex;
    align-items: center;
    margin-right: 1rem;
}

.palette-swatch {
    width: 12px;
    height: 12px;
    border-radius: 2px;
    margin-right: 0.25rem;
    border: 1px solid #999;
}

.palette-label {
    font-size: 0.9rem;
    color: #333;
}

/* Below the radio buttons, a 5-segment bar */
.stance-bar {
    display: flex;
    width: 100%;
    height: 8px; /* adjust thickness */
    margin: 0.5rem 0 1rem;
    border-radius: 4px; /* optional rounding */
    overflow: hidden;
}

.stance-segment {
    flex: 1;
}

.feed-date {
    font-size: 0.85rem;
    color: #666;
    margin-top: 0.25rem;
}

.stance-summary {
    display: flex;
    border: 1px solid #ccc;
    border-radius: 4px;
    overflow: hidden;
    margin: 0.5rem 0;
}

.stance-box {
    flex: 1;
    padding: 0.5rem 0;
    text-align: center;
    background: #f9f9f9;
    border-right: 1px solid #ddd;
}

    .stance-box:last-child {
        border-right: none;
    }

.stance-label {
    font-size: 0.75rem;
    color: #333;
    margin-bottom: 0.25rem;
}

.stance-value {
    font-size: 1rem;
    font-weight: bold;
    color: #000;
}

@keyframes twinkle {
    0% {
        opacity: 0;
    }

    1% {
        opacity: 1;
    }

    100% {
        opacity: 0;
    }
}

.leaflet-interactive.twinkle-marker {
    animation: twinkle 1.5s ease-out infinite;
    /* now pull each circle's own delay from a CSS var */
    animation-delay: var(--twinkle-delay);
}

.share-button {
    margin-top: 0.5rem;
    padding: 0.4rem 0.8rem;
    font-size: 0.9rem;
    background-color: #0B63A4;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    width: 100%;
    box-sizing: border-box;
}

    .share-button:hover {
        background-color: #0056b3;
    }

.right-column {
    overflow-y: auto;
    max-height: 100vh;
}

/* Dark Mode Styles */
body.dark-mode {
    background: #1a1a1a;
    color: #e0e0e0;
}

.dark-mode-toggle {
    background: #f0f0f0;
    border: none;
    border-radius: 20px;
    padding: 8px 16px;
    cursor: pointer;
    font-size: 1.2rem;
    margin-right: 1rem;
    transition: all 0.3s ease;
}

body.dark-mode .dark-mode-toggle {
    background: #444;
}

body.dark-mode .app-header {
    background: #2d2d2d;
    border-bottom: 1px solid #444;
}

body.dark-mode .card {
    background: #2d2d2d;
    color: #e0e0e0;
}

body.dark-mode .feed-item {
    background: #1a1a1a;
    border: 1px solid #333;
}

body.dark-mode input,
body.dark-mode textarea,
body.dark-mode select {
    background: #1a1a1a;
    color: #e0e0e0;
    border: 1px solid #444;
}

body.dark-mode .feed-date {
    color: #444;
}

body.dark-mode .feed-desc {
    color: #999; /* previously used for date */
}

body.dark-mode .stance-box {
    background: #1a1a1a;
    border: 1px solid #444;
}

.feed-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 0;
    border-bottom: 1px solid #ccc;
}

.feed-left {
    flex: 1;
}

.feed-right {
    margin-left: 1rem;
    font-weight: bold;
    color: #666;
}

body.dark-mode .feed-right {
    color: #aaa;
}

/* About Modal Styles */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.7);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    animation: fadeIn 0.2s ease;
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

.modal-content {
    background: white;
    border-radius: 12px;
    padding: 2rem;
    max-width: 500px;
    width: 90%;
    max-height: 80vh;
    overflow-y: auto;
    position: relative;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
    animation: slideIn 0.3s ease;
}

@keyframes slideIn {
    from {
        transform: translateY(-50px);
        opacity: 0;
    }

    to {
        transform: translateY(0);
        opacity: 1;
    }
}

.modal-close {
    position: absolute;
    top: 1rem;
    right: 1rem;
    background: #f0f0f0;
    border: none;
    border-radius: 50%;
    width: 32px;
    height: 32px;
    font-size: 1.2rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
}

    .modal-close:hover {
        background: #e0e0e0;
        transform: rotate(90deg);
    }

.modal-title {
    margin: 0 0 1.5rem 0;
    font-size: 1.8rem;
    color: #333;
    padding-right: 2rem;
}

.modal-body {
    line-height: 1.6;
}

    .modal-body p {
        margin-bottom: 1rem;
        color: #555;
    }

/* Dark mode support for modal */
body.dark-mode .modal-content {
    background: #2d2d2d;
    color: #e0e0e0;
}

body.dark-mode .modal-title {
    color: #e0e0e0;
}

body.dark-mode .modal-body p {
    color: #ccc;
}

body.dark-mode .modal-close {
    background: #444;
    color: #e0e0e0;
}

    body.dark-mode .modal-close:hover {
        background: #555;
    }

/* Email handle and accordion toggle colors */
.header-email {
    background: none;
    border: none;
    padding: 0;
    cursor: pointer;
}

body.dark-mode .header-email {
    color: #9ca3af;
}

.accordion-toggle {
    background: #0b63a4;
    color: white;
}

body.dark-mode .accordion-toggle {
    background: #444;
    color: #e0e0e0;
}

    body.dark-mode .accordion-toggle:hover {
        background: #555;
    }

    body.dark-mode .accordion-toggle.open {
        background: #555;
    }

/* Dark mode styling for stance summary boxes */
body.dark-mode .stance-label {
    color: #9ca3af; /* Same gray as email handle in dark mode */
}

body.dark-mode .stance-value {
    color: #e0e0e0; /* Same color as GPS coordinates in dark mode */
}

/* Scrollbar styling for light mode */
.feed-list::-webkit-scrollbar {
    width: 8px;
}

.feed-list::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 4px;
}

.feed-list::-webkit-scrollbar-thumb {
    background: #888;
    border-radius: 4px;
}

    .feed-list::-webkit-scrollbar-thumb:hover {
        background: #555;
    }

/* Dark mode scrollbar styling */
body.dark-mode .feed-list::-webkit-scrollbar-track {
    background: #1a1a1a;
}

body.dark-mode .feed-list::-webkit-scrollbar-thumb {
    background: #444;
}

    body.dark-mode .feed-list::-webkit-scrollbar-thumb:hover {
        background: #555;
    }

/* Dark mode styling for spotlight description text */
body.dark-mode .spotlight-desc {
    color: #d1d5db;
}

/* Scrollbar styling for spotlight content in light mode */
.spotlight-content::-webkit-scrollbar {
    width: 8px;
}

.spotlight-content::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 4px;
}

.spotlight-content::-webkit-scrollbar-thumb {
    background: #888;
    border-radius: 4px;
}

    .spotlight-content::-webkit-scrollbar-thumb:hover {
        background: #555;
    }

/* Dark mode scrollbar styling for spotlight */
body.dark-mode .spotlight-content::-webkit-scrollbar-track {
    background: #1a1a1a;
}

body.dark-mode .spotlight-content::-webkit-scrollbar-thumb {
    background: #444;
}

    body.dark-mode .spotlight-content::-webkit-scrollbar-thumb:hover {
        background: #555;
    }

/* Dark mode styling for spotlight close button */
body.dark-mode .spotlight-close {
    background: #444;
    color: #e0e0e0;
}

    body.dark-mode .spotlight-close:hover {
        background: #555;
    }

/* Spin the 'X' for Topic Spotlight */
.spotlight-close {
    transition: all 0.2s ease;
}

    .spotlight-close:hover {
        transform: rotate(90deg);
    }

/* Dark mode styling for Leaflet zoom buttons */
body.dark-mode .leaflet-control-zoom-in,
body.dark-mode .leaflet-control-zoom-out {
    background: #444;
    color: #e0e0e0;
    border: 1px solid #555;
}

    body.dark-mode .leaflet-control-zoom-in:hover,
    body.dark-mode .leaflet-control-zoom-out:hover {
        background: #555;
        color: #fff;
    }

/* Twinkle effects */
@keyframes pulse {
    0%, 100% {
        transform: scale(0.9);
        opacity: 0.6;
    }

    50% {
        transform: scale(1.2);
        opacity: 1;
    }
}

.twinkle-dot {
    width: 12px;
    height: 12px;
    background: gold;
    border-radius: 50%;
    animation: pulse 1.5s ease-in-out infinite;
    box-shadow: 0 0 6px rgba(255, 215, 0, 0.5);
}

/* ========================================
   MOBILE RESPONSIVE DESIGN
   ======================================== */

/* Tablet & iPad (768px and below) */
@media (max-width: 768px) {
    /* Stack layout vertically on tablets */
    .app-main {
        flex-direction: column;
        gap: 0.5rem;
        padding: 0.5rem;
    }

    /* Hide map on tablets, show feed full-width */
    .map-column {
    display: flex !important;
    flex-direction: column;
    width: 100%;
    min-height: 250px;
    }

    /* Sidebar becomes full-width */
    .right-column {
        flex: 1 1 auto;
        width: 100%;
        gap: 0.5rem;
    }

    /* Header adjustments for tablets */
    .app-header {
        padding: 0.5rem 0.75rem;
    }

    .site-title {
        font-size: 0.95rem;
    }

    .header-right {
        gap: 0.5rem;
    }

    .header-user-line {
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        text-align: right;
        gap: 0.4rem;
        margin-right: 48px;
    }

    .header-email.mono,
    .header-home,
    .dark-mode-toggle {
        font-size: 0.75rem;
        white-space: nowrap;
    }

    .header-logout {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 5px 8px;
        font-size: 0.75rem;
        margin-bottom: 4px;
        height: 28px;
    }

        .header-logout svg {
            width: 16px;
            height: 16px;
            vertical-align: middle; /* 👈 Ensures icon sits flush */
        }

    /* Reduce card padding */
    .card {
        padding: 0.6rem;
    }

    /* Reduce radios gap and font */
    .radios {
        gap: 0.4rem;
        font-size: 0.8rem;
    }

    /* Reduce form gaps */
    .compact-form {
        gap: 0.4rem;
    }

        .compact-form input[type="email"],
        .compact-form input[type="password"],
        .compact-form input[type="text"],
        .compact-form textarea,
        .compact-form select {
            padding: 0.4rem;
            font-size: 0.9rem;
        }

        .compact-form button {
            padding: 0.4rem 0.5rem;
        }

    /* Feed item adjustments */
    .feed-item {
        padding: 0.4rem 0;
    }

    .feed-title {
        font-size: 0.9rem;
    }

    .feed-desc {
        font-size: 0.8rem;
        margin-top: 0.2rem;
    }

    .feed-date {
        font-size: 0.75rem;
    }

    /* Spotlight adjustments */
    .spotlight-section {
        padding: 0.75rem;
    }

    .spotlight-title {
        font-size: 0.95rem;
    }

    .spotlight-actions {
        flex-direction: row;
        flex-wrap: nowrap;
        justify-content: space-between;
    }

    .stance-summary {
        display: flex;
        flex-direction: row;
        flex-wrap: nowrap;
        justify-content: space-between;
        width: 100%;
        padding: 0.5rem 0;
    }

    .stance-box {
        flex: 1; /* Each box takes equal space */
        text-align: center;
        font-size: 0.85rem;
        border-radius: 6px;
        background: #f0f0f0;
        color: #333;
        border: 1px solid #ccc;
        box-sizing: border-box;
        margin: 0; /* No gaps */
    }

    .spotlight-close {
        width: 28px;
        height: 28px;
        font-size: 1rem;
        top: 0.75rem;
        right: 2rem;
    }

    /* Stance summary adjustments */
    
    .stance-label {
        font-size: 0.65rem;
    }

    .stance-value {
        font-size: 0.9rem;
    }

    /* Modal adjustments */
    .modal-content {
        padding: 1.5rem;
    }

    .modal-title {
        font-size: 1.4rem;
    }

    .modal-body {
        font-size: 0.9rem;
    }

        .modal-body p {
            margin-bottom: 0.75rem;
        }

    /* Share button */
    .share-button {
        padding: 0.35rem 0.6rem;
        font-size: 0.85rem;
    }

    /* Create section title */
    .create-section .accordion-header h3 {
        font-size: 1rem;
    }

    /* Accordion toggle size */
    .accordion-toggle {
        width: 30px;
        height: 30px;
        font-size: 16px;
    }

    /* Width control*/
    html, body {
        overflow-x: hidden;
    }

}

/* Small phones (480px and below) */
@media (max-width: 480px) {
    /* Full width control*/
    .app-main {
        flex-direction: column;
        width: 100vw;
        max-width: 100vw;
        padding: 0;
        margin: 0;
        box-sizing: border-box;
        overflow-x: hidden;
    }

    .right-column,
    .create-section,
    .filters-section,
    .card {
        width: 100%;
        max-width: 100%;
        padding: 0.75rem;
        margin: 0 auto;
        box-sizing: border-box;
        overflow-x: hidden;
    }

    /* Restructure header for mobile - improved version */
    .app-header {
        flex-wrap: wrap;
        padding: 0.6rem 0.75rem;
        gap: 0.75rem;
        align-items: center;
    }

    .site-title {
        flex: 1 1 auto;
        text-align: left;
        font-size: 1rem;
    }

    .header-right {
        flex: 0 0 auto;
        display: flex;
        gap: 0.5rem;
        align-items: center;
    }

    .dark-mode-toggle {
        order: 2;
        padding: 6px;
        font-size: 1.1rem;
    }

    .header-logout {
        position: absolute;
        top: 0.5rem;
        right: 0.75rem;
        width: 34px;
        height: 34px;
        padding: 6px;
        z-index: 10;
    }

    /* User info on new row - better aligned */
    .header-user-line {
        flex: 1 1 100%;
        width: 100%;
        order: 4;
        justify-content: flex-start;
        align-items: center;
        gap: 0.75rem;
        margin-top: 0.25rem;
    }

    .header-email.mono {
        font-size: 0.7rem;
    }

    .header-home {
        font-weight: 500;
        border: 1px solid rgba(255,255,255,0.2);
        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }

     /* Tighter overall spacing */
    .app-root {
        height: 100vh;
    }

    .app-header {
        padding: 0.4rem 0.5rem;
    }

    .site-title {
        font-size: 0.85rem;
        letter-spacing: 0.5px;
    }

    .header-right {
        gap: 0.3rem;
    }

    .dark-mode-toggle {
        padding: 6px 12px;
        font-size: 1rem;
        margin-right: 0.5rem;
    }

    .header-user-line {
        gap: 0.25rem;
    }

    .header-email.mono {
        font-size: 0.65rem;
    }

    .header-home {
        font-size: 0.65rem;
    }

    .header-action,
    .header-logout {
        padding: 4px 6px;
        font-size: 0.65rem;
    }

    .header-logout {
        width: 36px;
        height: 32px;
    }

        .header-logout svg {
            width: 14px;
            height: 14px;
        }

    /* Main layout */
    .app-main {
        padding: 0.25rem;
        gap: 0.25rem;
    }

    /* Card styling */
    .card {
        padding: 0.5rem;
        border-radius: 6px;
    }

    /* Compact form */
    .compact-form {
        gap: 0.35rem;
    }

        .compact-form input[type="email"],
        .compact-form input[type="password"],
        .compact-form input[type="text"],
        .compact-form textarea,
        .compact-form select {
            padding: 0.35rem;
            font-size: 1rem; /* Keep at 1rem for mobile readability */
            border-radius: 3px;
        }

        .compact-form button {
            padding: 0.35rem 0.5rem;
            font-size: 0.85rem;
        }

    /* Radios */
    .radios {
        gap: 0.3rem;
        font-size: 0.7rem;
    }

        .radios label {
            flex: 1;
            min-width: fit-content;
        }

        .radios input[type="radio"] {
            width: 14px;
            height: 14px;
            min-width: 14px;
        }

    /* Stance bar */
    .stance-bar {
        height: 6px;
        margin: 0.4rem 0 0.75rem;
    }

    /* Feed list */
    .feed-item {
        padding: 0.35rem 0;
    }

    .feed-title {
        font-size: 0.85rem;
        font-weight: 600;
    }

    .feed-desc {
        font-size: 0.7rem;
        margin-top: 0.15rem;
        line-height: 1.2;
    }

    .feed-date {
        font-size: 0.65rem;
        margin-top: 0.15rem;
    }

    .feed-meta {
        font-size: 0.75rem;
    }

    /* Spotlight */
    .spotlight-section {
        padding: 0.6rem;
    }

    .spotlight-title {
        font-size: 0.9rem;
        margin-bottom: 0.4rem;
    }

    .spotlight-count {
        font-size: 0.8rem;
        margin: 0.15rem 0 0.5rem;
    }

    .spotlight-close {
        width: 24px;
        height: 24px;
        font-size: 0.9rem;
        top: 0.5rem;
        right: 1.75rem;
    }

    .spotlight-desc {
        font-size: 0.85rem;
        line-height: 1.3;
        margin-bottom: 0.4rem;
    }

    .spotlight-meta {
        font-size: 0.75rem;
        margin-bottom: 3rem;
    }

    .share-button {
        padding: 0.3rem 0.5rem;
        font-size: 0.8rem;
        margin-top: 0.3rem;
    }

    /* Stance summary */
    .stance-summary {
        display: flex;
        flex-direction: row;
        flex-wrap: nowrap;
        justify-content: space-between;
        width: 100%;
        padding: 0.5rem 0;
    }

    .stance-box {
        flex: 1; /* Each box takes equal space */
        text-align: center;
        font-size: 0.85rem;
        border-radius: 6px;
        background: #f0f0f0;
        color: #333;
        border: 1px solid #ccc;
        box-sizing: border-box;
        margin: 0; /* No gaps */
    }

    .stance-label {
        font-size: 0.6rem;
        margin-bottom: 0.15rem;
    }

    .stance-value {
        font-size: 0.8rem;
    }

    /* Engage */
    .spotlight-engage {
        margin-top: 0.5rem;
    }

        .spotlight-engage h4 {
            font-size: 0.85rem;
            margin-bottom: 0.35rem;
        }

    .engage-actions button {
        padding: 0.35rem 0.6rem;
        font-size: 0.85rem;
    }

    /* Create section */
    .create-section .accordion-header h3 {
        font-size: 1.0rem;
    }

    .accordion-section .accordion-header h3 {
        font-size: 1.0rem;
    }

    .accordion-toggle {
        width: 28px;
        height: 28px;
        font-size: 14px;
    }

    /* Modal */
    .modal-content {
        padding: 1rem;
        margin: 0.5rem;
        max-width: 95vw;
    }

    .modal-title {
        font-size: 1.2rem;
        padding-right: 1.5rem;
    }

    .modal-body {
        font-size: 0.85rem;
    }

        .modal-body p {
            margin-bottom: 0.6rem;
        }

    .modal-close {
        width: 28px;
        height: 28px;
        font-size: 1rem;
    }

    /* Auth boxes */
    .auth-box h3 {
        font-size: 0.95rem;
        margin-bottom: 0.5rem;
    }

    /* Color palette */
    .palette-item {
        margin-right: 0.75rem;
        font-size: 0.75rem;
    }

    .palette-swatch {
        width: 10px;
        height: 10px;
    }

    /* Ensure all text inputs are 1rem for mobile zoom prevention */
    input[type="email"],
    input[type="password"],
    input[type="text"],
    textarea,
    select {
        font-size: 1rem !important;
    }
}

/* Light mode AVG stance coloring*/
.stance-no-strong {
    background-color: #648FFF !important;
}

.stance-no {
    background-color: #785EF0 !important;
}

.stance-neutral {
    background-color: #DC267F !important;
}

.stance-yes {
    background-color: #FE6100 !important;
}

.stance-yes-strong {
    background-color: #FFB000 !important;
}

.avg-neutral {
    background-color: white !important;
    color: black !important;
}

@media (prefers-color-scheme: dark) {
    .avg-neutral {
        background-color: black !important;
        color: white !important;
    }
}
